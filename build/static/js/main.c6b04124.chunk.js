(this["webpackJsonprecord-store"]=this["webpackJsonprecord-store"]||[]).push([[0],{26:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(19),i=c.n(a),s=(c(26),c(0));var l=function(){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"RecordStore"}),Object(s.jsxs)("ul",{class:"navBar",children:[Object(s.jsx)("li",{children:"Lounge"}),Object(s.jsx)("li",{children:"Contacts"})]})]}),Object(s.jsx)("div",{class:"line"})]})},o=c(9),u=c.n(o),j=c(7),d=c(14),b=c(12);function h(){return(h=Object(d.a)(u.a.mark((function e(t){var c,n,r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=window.location.hash,n=new URLSearchParams(c),r=n.get("#access_token"),e.next=5,fetch("https://api.spotify.com/v1/search?q=".concat(t,"&type=album&limit=100"),{method:"GET",mode:"cors",headers:new Headers({Authorization:"Bearer "+r,"Content-Type":"application/x-www-form-urlencoded"})}).catch((function(e){alert("Expired Session")}));case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,s=i.albums?Object(j.a)(i.albums.items.map((function(e){return Object.assign({},{id:e.id,artist:e.artists[0].name,album:e.name,year:e.release_date.slice(0,4),uri:e.uri,cover:e.images[1].url,price:.01*parseFloat(e.release_date.slice(0,4))})}))):window.location.replace("http://localhost:3000/"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){return h.apply(this,arguments)};var O=function(e){return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("div",{className:"containPlay",children:[Object(s.jsx)("img",{src:e.src,alt:"".concat(e.name," album cover")}),Object(s.jsx)("div",{className:"play",onClick:e.onClick,children:Object(s.jsx)("div",{className:"circle",children:Object(s.jsx)("div",{className:"playIcon"})})})]}),Object(s.jsx)("div",{className:"cardInfo",children:Object(s.jsxs)("div",{className:"titleContain",children:[Object(s.jsx)("h2",{className:"cardTitle",children:e.name}),Object(s.jsxs)("h3",{children:[e.price,"\u20ac"]}),Object(s.jsx)("h3",{children:"by ".concat(e.artist)})]})}),Object(s.jsx)("button",{onClick:e.addToCart,children:"Add to cart"})]})};var f=function(e){return Object(s.jsx)("div",{children:Object(s.jsx)("iframe",{title:"spotifyPlayer",id:"spotify",src:"https://open.spotify.com/embed/album/".concat(e.currAlbum),width:"350",height:"80",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"})})};var p=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"cartItem",children:[Object(s.jsx)("img",{src:e.album.cover,alt:"".concat(e.album.album," album cover")}),Object(s.jsxs)("div",{className:"cartInfo",children:[Object(s.jsx)("h3",{className:"cartTitle",children:e.album.album}),Object(s.jsxs)("h3",{children:[" ",e.album.price,"\u20ac "]}),Object(s.jsxs)("form",{className:"howMany",children:[Object(s.jsx)("label",{children:"Units:"}),Object(s.jsx)("input",{value:e.value,onChange:e.onChange}),Object(s.jsxs)("div",{className:"arrowWrap",children:[Object(s.jsx)("div",{className:"arrows up",onClick:e.increment}),Object(s.jsx)("div",{className:"arrows down",onClick:e.decrement})]}),Object(s.jsx)("button",{type:"button",onClick:e.cancel,children:"Cancel"})]})]})]})})};var x=function(e){return Object(s.jsxs)("div",{className:"cart",children:[Object(s.jsx)("h2",{children:"My Cart"}),0===e.cart.length?Object(s.jsx)("h3",{className:"cartEmpty",children:"Your cart is empty."}):Object(s.jsx)("div",{children:Object(s.jsxs)("div",{children:[e.cart.map((function(t){return Object(s.jsx)(p,{album:t,value:(c=t.id,e.cart.filter((function(e){return e.id===c}))[0].quantity),onChange:function(c){return e.onChange(c,t.id)},increment:function(){return e.increment(t.id)},decrement:function(){return e.decrement(t.id)},cancel:function(){return e.cancel(t.id)}});var c})),Object(s.jsx)("div",{className:"line",children:" "}),Object(s.jsxs)("h4",{children:[" TOTAL: ",Object(s.jsxs)("i",{children:[function(){var t=e.cart.map((function(e){return e.total=e.price*e.quantity,e})).reduce((function(e,t){return e+t.total}),0);return Math.round(100*t)/100}(),"\u20ac"]})]}),Object(s.jsx)("div",{className:"buyBtn",children:Object(s.jsx)("button",{children:"Buy"})})]})})]})};var v=function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),i=Object(b.a)(a,2),l=i[0],o=i[1],h=Object(n.useState)("1DFixLWuPkv3KT3TnV35m3"),p=Object(b.a)(h,2),v=p[0],y=p[1],g=Object(n.useState)([]),N=Object(b.a)(g,2),w=N[0],C=N[1],k=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(c);case 3:(n=e.sent)&&o((function(){return Object(j.a)(n)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=w.map((function(t){return t.id===e?(t.quantity=parseFloat(t.quantity)+1,t):t}));C((function(e){return Object(j.a)(t)}))};return Object(s.jsxs)("div",{className:"searchWrapper",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("form",{onSubmit:k,className:"searchForm",children:[Object(s.jsx)("input",{onChange:function(e){r(e.target.value)},type:"text",placeholder:"Search for album/artist"}),Object(s.jsx)("button",{type:"submit",children:" Search"})]}),Object(s.jsx)("ul",{className:"searchResults",children:l?l.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(O,{onClick:function(){return function(e){var t=e.split("album:");y(t[1])}(e.uri)},artist:e.artist,name:e.album,price:e.price,src:e.cover,addToCart:function(){return function(e){if(0===Object(j.a)(w).filter((function(t){return t.id===e.id})).length){var t=Object.assign(e,{quantity:1});C((function(e){return[].concat(Object(j.a)(e),[t])}))}else S(e.id)}(e)}},e.id)})})):null})]}),Object(s.jsxs)("div",{className:"leftWrap",children:[Object(s.jsx)(f,{currAlbum:v}),Object(s.jsx)(x,{cart:w,cancel:function(e){return function(e){var t=Object(j.a)(w).filter((function(t){return t.id!==e}));console.log(t),C((function(e){return t}))}(e)},onChange:function(e,t){var c=w.map((function(c){return c.id===t?(c.quantity=e.target.value,c):c}));C((function(e){return Object(j.a)(c)}))},increment:function(e){return S(e)},decrement:function(e){return function(e){var t=w.map((function(t){return t.id===e&&t.quantity>1?(t.quantity=parseFloat(t.quantity)-1,t):t}));C((function(e){return Object(j.a)(t)}))}(e)}})]})]})},y=c.p+"static/media/spotifylogowhite.ecd54051.png";var g=function(){return Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("div",{className:"loginCard",children:[Object(s.jsx)("h3",{children:" Login to your Spotify. "}),Object(s.jsx)("img",{src:y,alt:"Spotify Logo"}),Object(s.jsx)("button",{children:Object(s.jsx)("a",{href:"https://accounts.spotify.com/authorize?client_id=68c3e415374845b885e86cf8f1cff7d0&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fcallback&response_type=token",children:"Spotify Login"})})]})})},N=c(20),w=c(2);var C=function(){return Object(s.jsx)("div",{children:Object(s.jsxs)(N.a,{children:[Object(s.jsx)(l,{}),Object(s.jsxs)(w.c,{children:[Object(s.jsx)(w.a,{path:"/callback",component:v}),Object(s.jsx)(w.a,{path:"/",component:g})]})]})})};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(C,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.c6b04124.chunk.js.map