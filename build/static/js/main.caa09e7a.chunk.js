(this["webpackJsonprecord-store"]=this["webpackJsonprecord-store"]||[]).push([[0],{26:function(e,t,c){},37:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(20),i=c.n(a),s=(c(26),c(11)),l=c(0);var o=function(){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"RecordStore"}),Object(l.jsxs)("ul",{className:"navBar",children:[Object(l.jsx)("li",{children:Object(l.jsx)(s.b,{className:"link",to:"/callback",children:"Store"})}),Object(l.jsx)("li",{children:Object(l.jsx)(s.b,{className:"link",to:"/contacts",children:"Contacts"})})]})]}),Object(l.jsx)("div",{className:"line"})]})},j=c(9),u=c.n(j),d=c(7),b=c(15),h=c(13);function m(){return(m=Object(b.a)(u.a.mark((function e(t){var c,n,r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=window.location.hash,n=new URLSearchParams(c),r=n.get("#access_token"),e.next=5,fetch("https://api.spotify.com/v1/search?q=".concat(t,"&type=album&limit=50"),{method:"GET",mode:"cors",headers:new Headers({Authorization:"Bearer "+r,"Content-Type":"application/x-www-form-urlencoded"})}).catch((function(e){alert("Expired Session")}));case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,console.log(i),s=i.albums?Object(d.a)(i.albums.items.map((function(e){return Object.assign({},{id:e.id,artist:e.artists[0].name,album:e.name,year:e.release_date.slice(0,4),uri:e.uri,cover:e.images[1].url,price:.01*parseFloat(e.release_date.slice(0,4))})}))):window.location.replace("../"),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){return m.apply(this,arguments)};var p=function(e){return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsxs)("div",{className:"containPlay",children:[Object(l.jsx)("img",{src:e.src,alt:"".concat(e.name," album cover")}),Object(l.jsx)("div",{className:"play",onClick:e.onClick,children:Object(l.jsx)("div",{className:"circle",children:Object(l.jsx)("div",{className:"playIcon"})})})]}),Object(l.jsx)("div",{className:"cardInfo",children:Object(l.jsxs)("div",{className:"titleContain",children:[Object(l.jsx)("h2",{className:"cardTitle",children:e.name}),Object(l.jsxs)("h3",{children:[e.price,"\u20ac"]}),Object(l.jsx)("h3",{children:"by ".concat(e.artist)})]})}),Object(l.jsx)("button",{onClick:e.addToCart,children:"Add to cart"})]})};var x=function(e){return Object(l.jsx)("div",{children:Object(l.jsx)("iframe",{title:"spotifyPlayer",id:"spotify",src:"https://open.spotify.com/embed/album/".concat(e.currAlbum),width:"350",height:"80",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"})})};var f=function(e){return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"cartItem",children:[Object(l.jsx)("img",{src:e.album.cover,alt:"".concat(e.album.album," album cover")}),Object(l.jsxs)("div",{className:"cartInfo",children:[Object(l.jsx)("h3",{className:"cartTitle",children:e.album.album}),Object(l.jsxs)("h3",{children:[" ",e.album.price,"\u20ac "]}),Object(l.jsxs)("form",{className:"howMany",children:[Object(l.jsx)("label",{children:"Units:"}),Object(l.jsx)("input",{value:e.value,onChange:e.onChange}),Object(l.jsxs)("div",{className:"arrowWrap",children:[Object(l.jsx)("div",{className:"arrows up",onClick:e.increment}),Object(l.jsx)("div",{className:"arrows down",onClick:e.decrement})]}),Object(l.jsx)("button",{type:"button",onClick:e.cancel,children:"Cancel"})]})]})]})})};var v=function(e){return Object(l.jsxs)("div",{className:"cart",children:[Object(l.jsx)("h2",{children:"My Cart"}),0===e.cart.length?Object(l.jsx)("h3",{className:"cartEmpty",children:"Your cart is empty."}):Object(l.jsx)("div",{children:Object(l.jsxs)("div",{children:[e.cart.map((function(t){return Object(l.jsx)(f,{album:t,value:(c=t.id,e.cart.filter((function(e){return e.id===c}))[0].quantity),onChange:function(c){return e.onChange(c,t.id)},increment:function(){return e.increment(t.id)},decrement:function(){return e.decrement(t.id)},cancel:function(){return e.cancel(t.id)}});var c})),Object(l.jsx)("div",{className:"line",children:" "}),Object(l.jsxs)("h4",{children:[" TOTAL: ",Object(l.jsxs)("i",{children:[function(){var t=e.cart.map((function(e){return e.total=e.price*e.quantity,e})).reduce((function(e,t){return e+t.total}),0);return Math.round(100*t)/100}(),"\u20ac"]})]}),Object(l.jsx)("div",{className:"buyBtn",children:Object(l.jsx)("button",{children:"Buy"})})]})})]})};var y=function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),i=Object(h.a)(a,2),s=i[0],o=i[1],j=Object(n.useState)("70QLa02zm19XEJAWUwNk4R"),m=Object(h.a)(j,2),f=m[0],y=m[1],N=Object(n.useState)([]),g=Object(h.a)(N,2),w=g[0],C=g[1],k=function(){var e=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O(c);case 3:(n=e.sent)&&o((function(){return Object(d.a)(n)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=w.map((function(t){return t.id===e?(t.quantity=parseFloat(t.quantity)+1,t):t}));C((function(e){return Object(d.a)(t)}))};return Object(l.jsxs)("div",{className:"searchWrapper",children:[Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{onSubmit:k,className:"searchForm",children:[Object(l.jsx)("input",{onChange:function(e){r(e.target.value)},type:"text",placeholder:"Search for album/artist"}),Object(l.jsx)("button",{type:"submit",children:" Search"})]}),Object(l.jsx)("ul",{className:"searchResults",children:s?s.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(p,{onClick:function(){return function(e){var t=e.split("album:");y(t[1])}(e.uri)},artist:e.artist,name:e.album,price:e.price,src:e.cover,addToCart:function(){return function(e){if(0===Object(d.a)(w).filter((function(t){return t.id===e.id})).length){var t=Object.assign(e,{quantity:1});C((function(e){return[].concat(Object(d.a)(e),[t])}))}else S(e.id)}(e)}},e.id)})})):null})]}),Object(l.jsxs)("div",{className:"leftWrap",children:[Object(l.jsx)(x,{currAlbum:f}),Object(l.jsx)(v,{cart:w,cancel:function(e){return function(e){var t=Object(d.a)(w).filter((function(t){return t.id!==e}));console.log(t),C((function(e){return t}))}(e)},onChange:function(e,t){var c=w.map((function(c){return c.id===t?(c.quantity=e.target.value,c):c}));C((function(e){return Object(d.a)(c)}))},increment:function(e){return S(e)},decrement:function(e){return function(e){var t=w.map((function(t){return t.id===e&&t.quantity>1?(t.quantity=parseFloat(t.quantity)-1,t):t}));C((function(e){return Object(d.a)(t)}))}(e)}})]})]})},N=c.p+"static/media/spotifylogowhite.ecd54051.png";var g=function(){var e=window.location.href,t=encodeURI(e+"callback");console.log(t);var c="https://accounts.spotify.com/authorize?client_id=68c3e415374845b885e86cf8f1cff7d0&redirect_uri=".concat(t,"&response_type=token");return Object(l.jsx)("div",{className:"login",children:Object(l.jsxs)("div",{className:"loginCard",children:[Object(l.jsx)("h3",{children:" Login to your Spotify. "}),Object(l.jsx)("img",{src:N,alt:"Spotify Logo"}),Object(l.jsx)("button",{children:Object(l.jsx)("a",{href:c,children:"Spotify Login"})})]})})},w=c(2);var C=function(){return Object(l.jsx)("div",{className:"contacts",children:Object(l.jsxs)("div",{className:"cart",children:[Object(l.jsx)("h2",{children:"Contacts"}),Object(l.jsx)("h3",{className:"cartEmpty",children:"Address: Across 110th Street"}),Object(l.jsx)("h3",{className:"cartEmpty",children:"Mail: RecordStore21@gmail.com"}),Object(l.jsx)("h3",{className:"cartEmpty",children:" Telephone: +991 234 234 432"})]})})};var k=function(){return Object(l.jsx)("div",{children:Object(l.jsxs)(s.a,{basename:"/TOP-Record-Store",children:[Object(l.jsx)(o,{}),Object(l.jsxs)(w.c,{children:[Object(l.jsx)(w.a,{path:"/callback",component:y}),Object(l.jsx)(w.a,{path:"/contacts",component:C}),Object(l.jsx)(w.a,{path:"/",component:g})]})]})})};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.caa09e7a.chunk.js.map